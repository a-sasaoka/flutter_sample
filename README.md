# Flutter Sample Project

Flutteré–‹ç™ºã®ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚\
åˆå­¦è€…ã‹ã‚‰ä¸­ç´šè€…ã¾ã§ã€å®Ÿè·µçš„ãªã‚¢ãƒ—ãƒªæ§‹æˆã‚„é–‹ç™ºç’°å¢ƒã®æ•´å‚™æ–¹æ³•ã‚’å­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸš€ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€Flutterã‚’ç”¨ã„ãŸã‚¢ãƒ—ãƒªé–‹ç™ºã§å½¹ç«‹ã¤æ§‹æˆãƒ»è¨­å®šã‚’ä½“ç³»çš„ã«ã¾ã¨ã‚ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚\
ç‰¹ã«ä»¥ä¸‹ã®æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚’æ¡ç”¨ã—ã€å®Ÿå‹™ã§ã‚‚é€šç”¨ã™ã‚‹è¨­è¨ˆã‚’æ„è­˜ã—ã¦ã„ã¾ã™ã€‚

### ğŸ§  æ¡ç”¨æŠ€è¡“

| åˆ†é¡             | ä½¿ç”¨æŠ€è¡“                                                                                                                                                                                |
| -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| çŠ¶æ…‹ç®¡ç†           | [Riverpod](https://riverpod.dev) + [Flutter Hooks](https://pub.dev/packages/flutter_hooks)                                                                                          |
| ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°         | [GoRouter](https://pub.dev/packages/go_router) + [go\_router\_builder](https://pub.dev/packages/go_router_builder)                                                                  |
| é€šä¿¡             | [Dio](https://pub.dev/packages/dio) + [pretty\_dio\_logger](https://pub.dev/packages/pretty_dio_logger)                                                                             |
| ãƒ¢ãƒ‡ãƒ«ç”Ÿæˆ          | [Freezed](https://pub.dev/packages/freezed) + [json\_serializable](https://pub.dev/packages/json_serializable)                                                                      |
| ç’°å¢ƒå¤‰æ•°           | [Envied](https://pub.dev/packages/envied)                                                                                                                                           |
| ãƒ†ãƒ¼ãƒç®¡ç†          | [Flex Color Scheme](https://pub.dev/packages/flex_color_scheme)                                                                                                                     |
| ãƒ­ã‚°             | [Logger](https://pub.dev/packages/logger)                                                                                                                                           |
| Lint / é™çš„è§£æ    | [very\_good\_analysis](https://pub.dev/packages/very_good_analysis), [custom\_lint](https://pub.dev/packages/custom_lint), [riverpod\_lint](https://pub.dev/packages/riverpod_lint) |
| Flutterãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† | [FVM](https://fvm.app) (`3.35.7` ä½¿ç”¨)                                                                                                                                                |

---

## âš™ï¸ é–‹ç™ºç’°å¢ƒ

| é …ç›®          | å†…å®¹                        |
| ----------- | ------------------------- |
| IDE         | Visual Studio Code        |
| Flutter SDK | ç®¡ç†: FVM / ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 3.35.7   |
| Dart SDK    | 3.9.2                     |
| GitHubç®¡ç†    | Gitï¼ˆ`.gitkeep`ã§ç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç®¡ç†ï¼‰ |

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

ä»¥ä¸‹ã¯ `lib` ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã§ã™ã€‚  
ãã‚Œãã‚Œã®å½¹å‰²ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§è£œè¶³ã—ã¦ã„ã¾ã™ã€‚

```plaintext
lib
â”œâ”€â”€ main.dart                                       # ã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€‚æœ€åˆã«å®Ÿè¡Œã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ l10n                                            # å¤šè¨€èªå¯¾å¿œç”¨ã®ARBãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ ¼ç´ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ app_en.arb                                  # è‹±èªç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã€€
â”‚   â””â”€â”€ app_ja.arb                                  # æ—¥æœ¬èªç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ src
    â”œâ”€â”€ core                                        # ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±é€šçš„ã«åˆ©ç”¨ã•ã‚Œã‚‹åŸºç›¤ã‚³ãƒ¼ãƒ‰
    â”‚   â”œâ”€â”€ auth                                    # èªè¨¼é–¢é€£ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ãƒ»ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªã©ï¼‰
    â”‚   â”‚   â”œâ”€â”€ auth_guard.dart                     # GoRouterç”¨ã‚¬ãƒ¼ãƒ‰é–¢æ•°
    â”‚   â”‚   â”œâ”€â”€ auth_repository.dart                # ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥å‡¦ç†
    â”‚   â”‚   â”œâ”€â”€ auth_state_notifier.dart            # ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç›£è¦–ã™ã‚‹Provider
    â”‚   â”‚   â”œâ”€â”€ token_interceptor.dart              # Dioã®Interceptorã§è‡ªå‹•ä»˜ä¸ãƒ»æ›´æ–°
    â”‚   â”‚   â””â”€â”€ token_storage.dart                  # ãƒˆãƒ¼ã‚¯ãƒ³ã®æ°¸ç¶šåŒ–ï¼ˆSharedPreferencesï¼‰
    â”‚   â”œâ”€â”€ config                                  # ç’°å¢ƒè¨­å®šã‚„ãƒ†ãƒ¼ãƒã€å…±æœ‰è¨­å®šãªã©
    â”‚   â”‚   â”œâ”€â”€ app_config_provider.dart            # ã‚¢ãƒ—ãƒªå…¨ä½“ã®è¨­å®šã‚’ã¾ã¨ã‚ã¦å–å¾—ã™ã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€
    â”‚   â”‚   â”œâ”€â”€ app_env.dart                        # ç’°å¢ƒå¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã‚¯ãƒ©ã‚¹
    â”‚   â”‚   â”œâ”€â”€ app_theme.dart                      # flex_color_schemeã«ã‚ˆã‚‹ãƒ†ãƒ¼ãƒè¨­å®š
    â”‚   â”‚   â”œâ”€â”€ locale_provider.dart                # ã‚¢ãƒ—ãƒªå…¨ä½“ã®ãƒ­ã‚±ãƒ¼ãƒ«ã‚’ç®¡ç†ã™ã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€
    â”‚   â”‚   â””â”€â”€ theme_mode_provider.dart            # ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ãªã©ãƒ†ãƒ¼ãƒåˆ‡æ›¿ã®çŠ¶æ…‹ç®¡ç†
    â”‚   â”œâ”€â”€ exceptions                              # å…±é€šã®ä¾‹å¤–ã‚¯ãƒ©ã‚¹å®šç¾©
    â”‚   â”‚   â””â”€â”€ app_exception.dart                  # APIã‚¨ãƒ©ãƒ¼ãªã©ã‚’ã¾ã¨ã‚ã¦æ‰±ã†ä¾‹å¤–ã‚¯ãƒ©ã‚¹
    â”‚   â”œâ”€â”€ network                                 # é€šä¿¡é–¢é€£ã®è¨­å®šã‚„ãƒ­ã‚®ãƒ³ã‚°
    â”‚   â”‚   â”œâ”€â”€ dio_interceptor.dart                # Dioã®é€šä¿¡ã‚’ç›£è¦–ã™ã‚‹Interceptor
    â”‚   â”‚   â””â”€â”€ logger_provider.dart                # loggerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã‚‹ãƒ­ã‚°å‡ºåŠ›è¨­å®š
    â”‚   â”œâ”€â”€ router                                  # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆGoRouterï¼‰é–¢é€£
    â”‚   â”‚   â””â”€â”€ app_router.dart                     # ãƒ«ãƒ¼ãƒˆå®šç¾©ï¼ˆç”»é¢é·ç§»ã®è¨­å®šï¼‰
    â”‚   â”œâ”€â”€ storage                                 # æ°¸ç¶šåŒ–é–¢é€£ï¼ˆSharedPreferencesãƒ™ãƒ¼ã‚¹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã©ï¼‰
    â”‚   â”‚   â”œâ”€â”€ cache_manager.dart                  # ã‚­ãƒ£ãƒƒã‚·ãƒ¥å…±é€šã‚¯ãƒ©ã‚¹
    â”‚   â”‚   â””â”€â”€ shared_preferences_provider.dart    # SharedPreferencesãƒ—ãƒ­ãƒã‚¤ãƒ€
    â”‚   â”œâ”€â”€ ui                                      # å…±é€šUIé–¢é€£ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãªã©ï¼‰
    â”‚   â”‚   â””â”€â”€ error_handler.dart                  # ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°UI
    â”‚   â”œâ”€â”€ utils                                   # å…±é€šã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ç¾¤ï¼ˆæœªå®Ÿè£… or ä»Šå¾Œè¿½åŠ ï¼‰
    â”‚   â””â”€â”€ widgets                                 # æ±ç”¨UIéƒ¨å“ã‚„ç”»é¢
    â”‚       â”œâ”€â”€ home_screen.dart                    # ãƒ›ãƒ¼ãƒ ç”»é¢
    â”‚       â”œâ”€â”€ not_found_screen.dart               # ãƒ«ãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„æ™‚ã®ç”»é¢
    â”‚       â””â”€â”€ settings_screen.dart                # è¨­å®šç”»é¢
    â”œâ”€â”€ data                                        # ãƒ‡ãƒ¼ã‚¿å±¤ï¼šAPIã‚„ãƒªãƒã‚¸ãƒˆãƒªã®å®šç¾©
    â”‚   â”œâ”€â”€ datasource                              # APIé€šä¿¡ã‚„ãƒ‡ãƒ¼ã‚¿å–å¾—é–¢é€£
    â”‚   â”‚   â””â”€â”€ api_client.dart                     # Dioã‚’ä½¿ã£ãŸAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    â”‚   â”œâ”€â”€ models                                  # å…±é€šãƒ¢ãƒ‡ãƒ«å®šç¾©ï¼ˆæœªå®Ÿè£… or ä»Šå¾Œè¿½åŠ ï¼‰
    â”‚   â””â”€â”€ repository                              # å…±é€šãƒªãƒã‚¸ãƒˆãƒªå®šç¾©ï¼ˆæœªå®Ÿè£… or ä»Šå¾Œè¿½åŠ ï¼‰
    â””â”€â”€ features                                    # å„æ©Ÿèƒ½ï¼ˆç”»é¢å˜ä½ï¼‰ã”ã¨ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
        â”œâ”€â”€ auth                                    # èªè¨¼é–¢é€£æ©Ÿèƒ½
        â”‚   â””â”€â”€ presentation                        # ç”»é¢(UI)å±¤
        â”‚       â””â”€â”€ login_screen.dart               # ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®UI
        â”œâ”€â”€ sample_feature                          # ã‚µãƒ³ãƒ—ãƒ«ç”¨ã®æ©Ÿèƒ½
        â”‚   â”œâ”€â”€ application                         # çŠ¶æ…‹ç®¡ç†ãƒ»ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
        â”‚   â”œâ”€â”€ data                                # ãƒ‡ãƒ¼ã‚¿å–å¾—å‡¦ç†ï¼ˆAPIã‚„DBã‚¢ã‚¯ã‚»ã‚¹ï¼‰
        â”‚   â”œâ”€â”€ domain                              # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ãƒ»ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®šç¾©
        â”‚   â””â”€â”€ presentation                        # ç”»é¢(UI)å±¤
        â”‚       â””â”€â”€ sample_screen.dart              # ã‚µãƒ³ãƒ—ãƒ«ç”»é¢ã®UI
        â”œâ”€â”€ splash                                  # ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢é–¢é€£æ©Ÿèƒ½
        â”‚   â””â”€â”€ presentation                        # ç”»é¢(UI)å±¤
        â”‚       â””â”€â”€ splash_screen.dart              # ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ã®UI
        â””â”€â”€ user                                    # ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£æ©Ÿèƒ½
            â”œâ”€â”€ application                         # çŠ¶æ…‹ç®¡ç†ã‚„Notifier
            â”‚   â””â”€â”€ user_notifier.dart              # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆç®¡ç†ã®Notifier
            â”œâ”€â”€ data                                # ãƒ‡ãƒ¼ã‚¿å±¤ï¼ˆãƒ¢ãƒ‡ãƒ«ã‚„ãƒªãƒã‚¸ãƒˆãƒªï¼‰
            â”‚   â”œâ”€â”€ address.dart                    # ä½æ‰€ãƒ¢ãƒ‡ãƒ«
            â”‚   â”œâ”€â”€ user_model.dart                 # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«
            â”‚   â””â”€â”€ user_repository.dart            # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ‰±ã†ãƒªãƒã‚¸ãƒˆãƒª
            â””â”€â”€ presentation                        # ç”»é¢(UI)å±¤
                â””â”€â”€ user_list_screen.dart           # ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ç”»é¢ã®UI
```

---

## ğŸ§± åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1ï¸âƒ£ FVMã«ã‚ˆã‚‹Flutterãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®š

```bash
fvm use 3.35.7
```

### 2ï¸âƒ£ ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
fvm flutter pub get
```

---

## ğŸ§© Git Hooksã§ã‚³ãƒŸãƒƒãƒˆå‰ã«Lintãƒã‚§ãƒƒã‚¯ã‚’è‡ªå‹•å®Ÿè¡Œ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ã‚³ãƒŸãƒƒãƒˆæ™‚ã«è‡ªå‹•ã§ `flutter analyze` ã¨ `dart format` ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ä»•çµ„ã¿ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚\
ã“ã‚Œã«ã‚ˆã‚Šã€Lintã‚¨ãƒ©ãƒ¼ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¼ã‚Œã‚’é˜²ãã€å¸¸ã«ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒŸãƒƒãƒˆã§ãã¾ã™ã€‚

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
chmod +x tool/hooks/pre-commit tool/setup_git_hooks.sh
./tool/setup_git_hooks.sh
```

ã“ã‚Œã«ã‚ˆã‚Šã€Gitã®ãƒ•ãƒƒã‚¯è¨­å®šãŒè‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã€\
`tool/hooks/pre-commit` ãŒãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“ã§å…±æœ‰ã•ã‚Œã¾ã™ã€‚

### å‹•ä½œå†…å®¹

- ã‚³ãƒŸãƒƒãƒˆå‰ã«ä»¥ä¸‹ã‚’è‡ªå‹•å®Ÿè¡Œï¼š
  - `flutter analyze`ï¼ˆé™çš„è§£æï¼‰
  - `dart format --set-exit-if-changed`ï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ï¼‰
- ã©ã¡ã‚‰ã‹ã«å•é¡ŒãŒã‚ã‚‹å ´åˆã€ã‚³ãƒŸãƒƒãƒˆã¯ä¸­æ–­ã•ã‚Œã¾ã™ã€‚

---

## ğŸ§© Lintè¨­å®š

### åˆ©ç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- very\_good\_analysis
- custom\_lint
- riverpod\_lint

---

## ğŸ§© GoRouterã‚’ä½¿ã£ãŸãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ [GoRouter](https://pub.dev/packages/go_router) ã‚’åˆ©ç”¨ã—ã€ã‚¢ãƒ—ãƒªå…¨ä½“ã®ç”»é¢é·ç§»ã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚\
ã•ã‚‰ã« [go\_router\_builder](https://pub.dev/packages/go_router_builder) ã‚’å°å…¥ã—ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹**å‹å®‰å…¨ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©**ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

### ä¸»ãªç‰¹å¾´

- `@TypedGoRoute` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ãƒ«ãƒ¼ãƒˆã‚’å®šç¾©ã—ã€`build_runner` ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã€‚
- å„ç”»é¢ã¯ `GoRouteData` ã‚’ç¶™æ‰¿ã—ã€IDEè£œå®Œã§å®‰å…¨ã«é·ç§»å¯èƒ½ã€‚
- `const SampleRoute().go(context)` ã®ã‚ˆã†ã«è¨˜è¿°ã§ãã€ãƒ‘ã‚¹æ–‡å­—åˆ—ã‚’ç›´æ¥æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
- `routerProvider` ã«ã‚ˆã‚Šã€`Riverpod` çµŒç”±ã§ `GoRouter` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚

---

### ğŸ“˜ TypedGoRouteã®ä½¿ç”¨ä¾‹

ãƒ«ãƒ¼ãƒˆã”ã¨ã«ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ã¦ã€å‹å®‰å…¨ãªé·ç§»ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

```dart
// lib/src/core/router/app_router.dart

@TypedGoRoute<HomeRoute>(path: '/')
class HomeRoute extends GoRouteData with $HomeRoute {
  const HomeRoute();

  @override
  Widget build(BuildContext context, GoRouterState state) {
    return const HomeScreen();
  }
}

// ç”»é¢é·ç§»ä¾‹
const HomeRoute().go(context); // "/" ã«é·ç§»
```

ã“ã‚Œã«ã‚ˆã‚Šã€æ–‡å­—åˆ—ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨˜è¿°ã‚’é¿ã‘ã‚‰ã‚Œã€IDEè£œå®ŒãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚
IDEã§ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã‚’è£œå®Œã™ã‚‹ã“ã¨ã§ã€ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ã‚„ãƒ‘ã‚¹æŒ‡å®šãƒŸã‚¹ã‚’é˜²ã’ã¾ã™ã€‚

---

### ğŸ§© Riverpodã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹GoRouterç®¡ç†

`GoRouter` è¨­å®šã‚’ Riverpod ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ§‹æ–‡ï¼ˆ`@riverpod`ï¼‰ã§å®šç¾©ã€‚\
`routerProvider` ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã€æ˜ç¤ºçš„ãª `Provider<GoRouter>` è¨˜è¿°ãŒä¸è¦ã§ã™ã€‚

---

## ğŸ§© SharedPreferences ã®æ°¸ç¶šåŒ–è¨­å®š

ãƒ†ãƒ¼ãƒãƒ¢ãƒ¼ãƒ‰ãªã©ã®è¨­å®šå€¤ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ãŸã‚ã«ã€`SharedPreferences` ã‚’ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã™ã‚‹ä»•çµ„ã¿ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚\
Riverpod ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ§‹æ–‡ï¼ˆ`@Riverpod(keepAlive: true)`ï¼‰ã‚’ä½¿ã„ã€ã©ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‹ã‚‰ã§ã‚‚å®‰å…¨ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚

ã“ã®æ§‹æˆã«ã‚ˆã‚Šã€`SharedPreferences` ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã—ã€ I/O ã‚’æœ€å°åŒ–ã—ã¤ã¤ãƒ†ã‚¹ãƒˆå¯èƒ½ãªå½¢ã§æ°¸ç¶šåŒ–å‡¦ç†ã‚’è¡Œãˆã¾ã™ã€‚

---

## ğŸ¨ ãƒ†ãƒ¼ãƒè¨­å®šï¼ˆFlexColorSchemeï¼‰

ã‚¢ãƒ—ãƒªå…¨ä½“ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ãƒ¼ãƒã¯ [FlexColorScheme](https://pub.dev/packages/flex_color_scheme) ã‚’åˆ©ç”¨ã—ã¦æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚
Material 3 å¯¾å¿œã§ã€ãƒ©ã‚¤ãƒˆï¼ãƒ€ãƒ¼ã‚¯ï¼ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰ã®åˆ‡ã‚Šæ›¿ãˆã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

### ä¸»ãªãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```plaintext
lib/src/core/config/
 â”œâ”€â”€ app_theme.dart           # ãƒ†ãƒ¼ãƒå®šç¾©ï¼ˆFlexColorSchemeï¼‰
 â””â”€â”€ theme_mode_provider.dart # ãƒ†ãƒ¼ãƒãƒ¢ãƒ¼ãƒ‰ã‚’ç®¡ç†ã™ã‚‹Riverpodãƒ—ãƒ­ãƒã‚¤ãƒ€
```

ğŸ’¡ `SharedPreferences` ã¨é€£æºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸãƒ†ãƒ¼ãƒãƒ¢ãƒ¼ãƒ‰ã‚’æ°¸ç¶šåŒ–ã—ã¦ã„ã¾ã™ã€‚
ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«å‰å›ã®ãƒ†ãƒ¼ãƒè¨­å®šã‚’è‡ªå‹•çš„ã«å¾©å…ƒã—ã¾ã™ã€‚

---

## ğŸŒ å¤šè¨€èªå¯¾å¿œï¼ˆLocalizationï¼‰

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ Flutter ã®å…¬å¼ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½ï¼ˆgen-l10nï¼‰ã‚’åˆ©ç”¨ã—ã€**lib/l10n + l10n.yaml** ã‚’ç”¨ã„ãŸå®‰å®šã—ãŸå¤šè¨€èªå¯¾å¿œã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

### ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```plaintext
lib/
 â””â”€â”€ l10n/
      â”œâ”€â”€ app_en.arb
      â””â”€â”€ app_ja.arb
l10n.yaml
```

### ğŸ“ l10n.yamlï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆï¼‰

```plaintext
arb-dir: lib/l10n
template-arb-file: app_en.arb
output-localization-file: app_localizations.dart
output-class: AppLocalizations
```

### ğŸŒ ARB ãƒ•ã‚¡ã‚¤ãƒ«ä¾‹

```json
app_en.arb:
{
  "@@locale": "en",
  "hello": "Hello",
  "login": "Login",
  "logout": "Logout"
}
```

```json
app_ja.arb:
{
  "@@locale": "ja",
  "hello": "ã“ã‚“ã«ã¡ã¯",
  "login": "ãƒ­ã‚°ã‚¤ãƒ³",
  "logout": "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"
}
```

### âš™ï¸ ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ

`fvm flutter gen-l10n`

ARB ã‚’ç·¨é›†ã—ãŸå ´åˆã¯å†åº¦ã‚³ãƒ¼ãƒ‰ç”ŸæˆãŒå¿…è¦ã§ã™ã€‚
ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã§ã¯ç¿»è¨³ãŒæ›´æ–°ã•ã‚Œãªã„ãŸã‚ã€
ã‚¢ãƒ—ãƒªã‚’ä¸€åº¦å®Œå…¨ã«åœæ­¢ã—ã¦å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚

### ğŸ— MaterialApp ã¸ã®çµ„ã¿è¾¼ã¿

```dart
MaterialApp.router(
  routerConfig: router,
  localizationsDelegates: AppLocalizations.localizationsDelegates,
  supportedLocales: AppLocalizations.supportedLocales,
)
```

### ğŸ§© ç¿»è¨³ã®åˆ©ç”¨ä¾‹

```dart
final t = AppLocalizations.of(context)!;
Text(t.hello);
```

---

## ğŸŒ APIé€šä¿¡ãƒ‡ãƒ¢ï¼ˆUserListï¼‰

[Dio](https://pub.dev/packages/dio) ã¨ [Riverpod](https://pub.dev/packages/flutter_riverpod) ã‚’çµ„ã¿åˆã‚ã›ã€
å¤–éƒ¨APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦UIã«è¡¨ç¤ºã™ã‚‹ä»•çµ„ã¿ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
ä»¥ä¸‹ã¯ `https://jsonplaceholder.typicode.com/users` ã‚’åˆ©ç”¨ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚

### ğŸ“ æ§‹æˆä¾‹

```plaintext
lib/src/features/user/
  â”œâ”€â”€ data/
  â”‚   â”œâ”€â”€ user_model.dart       # Freezedã§å®šç¾©ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«
  â”‚   â””â”€â”€ user_repository.dart  # APIå‘¼ã³å‡ºã—
  â”œâ”€â”€ application/
  â”‚   â””â”€â”€ user_notifier.dart    # çŠ¶æ…‹ç®¡ç†ï¼ˆãƒ­ãƒ¼ãƒ‰ä¸­ãƒ»æˆåŠŸãƒ»ã‚¨ãƒ©ãƒ¼ï¼‰
  â””â”€â”€ presentation/
      â””â”€â”€ user_list_screen.dart # ä¸€è¦§è¡¨ç¤ºç”»é¢
```

### ä¸»ãªãƒã‚¤ãƒ³ãƒˆ

- `Dio` ã®å…±é€šã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ `apiClientProvider` ã¨ã—ã¦æä¾›ã€‚
- `Freezed` + `JsonSerializable` ã«ã‚ˆã‚‹å‹å®‰å…¨ãªãƒ¢ãƒ‡ãƒ«å¤‰æ›ã€‚
- `Riverpod` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ`@riverpod`ï¼‰ã‚’æ´»ç”¨ã—ãŸçŠ¶æ…‹ç®¡ç†ã€‚
- ç”»é¢ã§ã¯ `AsyncValue` ã«ã‚ˆã‚‹èª­ã¿è¾¼ã¿ãƒ»ã‚¨ãƒ©ãƒ¼ãƒ»æˆåŠŸè¡¨ç¤ºã‚’åˆ¶å¾¡ã€‚

---

## âš™ï¸ é€šä¿¡ã‚¨ãƒ©ãƒ¼ã¨ãƒ­ã‚®ãƒ³ã‚°æ”¹å–„

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Dioã‚’åˆ©ç”¨ã—ãŸé€šä¿¡åŸºç›¤ã«å…±é€šã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ­ã‚®ãƒ³ã‚°å‡¦ç†ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ã™ã¹ã¦ã®APIé€šä¿¡ã§çµ±ä¸€çš„ã«ã‚¨ãƒ©ãƒ¼ç®¡ç†ã¨ãƒ­ã‚°å‡ºåŠ›ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

---

### ğŸ“ è¿½åŠ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```plaintext
lib/src/core/
 â”œâ”€â”€ exceptions/
 â”‚    â””â”€â”€ app_exception.dart        # å…±é€šä¾‹å¤–ã‚¯ãƒ©ã‚¹
 â””â”€â”€ network/
      â”œâ”€â”€ dio_interceptor.dart      # å…±é€šDioã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿
      â””â”€â”€ logger_provider.dart      # ç’°å¢ƒåˆ¥ãƒ­ã‚°å‡ºåŠ›ç”¨Loggerãƒ—ãƒ­ãƒã‚¤ãƒ€
```

---

### âœ… ãƒ¡ãƒªãƒƒãƒˆ

| é …ç›® | å†…å®¹ |
|------|------|
| å®‰å®šæ€§ | ã™ã¹ã¦ã®APIã‚¨ãƒ©ãƒ¼ã‚’å…±é€šã§å‡¦ç† |
| ãƒ‡ãƒãƒƒã‚°åŠ¹ç‡ | ç’°å¢ƒåˆ¥ãƒ­ã‚°åˆ¶å¾¡ã§ãƒã‚¤ã‚ºã‚’å‰Šæ¸› |
| æ‹¡å¼µæ€§ | ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°ã‚„ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ã®è¿½åŠ ãŒå®¹æ˜“ |
| ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ | AppExceptionã‚’ä½¿ã£ãŸãƒ¢ãƒƒã‚¯ãŒå¯èƒ½ |

---

ã“ã®æ”¹å–„ã«ã‚ˆã‚Šã€é€šä¿¡å‡¦ç†ã®ä¿¡é ¼æ€§ã¨ãƒ‡ãƒãƒƒã‚°æ€§ãŒå¤§å¹…ã«å‘ä¸Šã—ã¾ã™ã€‚

---

## âš ï¸ å…±é€šã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆSnackbar & Dialogï¼‰

ã‚¢ãƒ—ãƒªå…¨ä½“ã§ä¾‹å¤–ã‚’çµ±ä¸€çš„ã«å‡¦ç†ã™ã‚‹ãŸã‚ã«ã€`ErrorHandler` ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚  
ã“ã‚Œã«ã‚ˆã‚Šã€è»½ã„ã‚¨ãƒ©ãƒ¼ã¯ **Snackbar**ã€è‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼ã¯ **Dialog** ã§è¡¨ç¤ºã§ãã¾ã™ã€‚

---

### ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```plaintext
lib/src/core/ui/
 â””â”€â”€ error_handler.dart
```

---

### ğŸ’¡ ä½¿ã„åˆ†ã‘ä¾‹

#### è»½ã„é€šä¿¡ã‚¨ãƒ©ãƒ¼ï¼ˆSnackbarï¼‰

```dart
ErrorHandler.showSnackBar(context, e);
```

#### è‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼ï¼ˆDialogï¼‰

```dart
await ErrorHandler.showDialogError(context, e);
```

---

### âœ… ãƒ¡ãƒªãƒƒãƒˆ

| é …ç›® | å†…å®¹ |
|------|------|
| æŸ”è»Ÿæ€§ | çŠ¶æ³ã«å¿œã˜ã¦Snackbarã¨Dialogã‚’ä½¿ã„åˆ†ã‘å¯èƒ½ |
| å†åˆ©ç”¨æ€§ | ã©ã®ç”»é¢ã‹ã‚‰ã‚‚ `ErrorHandler` çµŒç”±ã§çµ±ä¸€çš„ã«å‘¼ã³å‡ºã›ã‚‹ |
| ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¸€å…ƒç®¡ç† |
| UXå‘ä¸Š | ã‚¢ãƒ—ãƒªå…¨ä½“ã§ä¸€è²«ã—ãŸã‚¨ãƒ©ãƒ¼ä½“é¨“ã‚’æä¾› |

---

ã“ã‚Œã§ã€ã™ã¹ã¦ã®ç”»é¢ã§ä¾‹å¤–ã‚’å®‰å…¨ã‹ã¤ä¸€è²«ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¼ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ”’ ãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼å¯¾å¿œï¼ˆBearer Token + è‡ªå‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€APIé€šä¿¡ã«Bearerãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼ã‚’è¿½åŠ ã—ã€ãƒˆãƒ¼ã‚¯ãƒ³ã®è‡ªå‹•ä»˜ä¸ãŠã‚ˆã³è‡ªå‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ã™ã¹ã¦ã®é€šä¿¡ã§èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è‡ªå‹•çš„ã«ä»˜ä¸ã—ã€æœ‰åŠ¹æœŸé™åˆ‡ã‚Œæ™‚ã«å†å–å¾—ã‚’è¡Œã„ã¾ã™ã€‚

---

### ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```plaintext
lib/src/core/auth/
 â”œâ”€â”€ token_storage.dart       # ãƒˆãƒ¼ã‚¯ãƒ³ã®æ°¸ç¶šåŒ–ï¼ˆSharedPreferencesï¼‰
 â”œâ”€â”€ auth_repository.dart     # ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥å‡¦ç†
 â””â”€â”€ token_interceptor.dart   # Dioã®Interceptorã§è‡ªå‹•ä»˜ä¸ãƒ»æ›´æ–°
```

---

### ğŸ§© Dioã¸ã®çµ„ã¿è¾¼ã¿é †åºï¼ˆé‡è¦ï¼‰

Interceptorã®ç™»éŒ²é †åºã¯ä»¥ä¸‹ã®é€šã‚Šã«ã—ã¦ãã ã•ã„ğŸ‘‡

```dart
dio.interceptors.add(ref.read(tokenInterceptorProvider)); // â‘  ãƒˆãƒ¼ã‚¯ãƒ³ä»˜ä¸ãƒ»ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
dio.interceptors.add(ref.read(dioInterceptorProvider));   // â‘¡ ãƒ­ã‚°å‡ºåŠ›ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```

#### ğŸ’¡ ç†ç”±

| é †ç•ª | èª¬æ˜ |
|------|------|
| â‘  tokenInterceptor | ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰ã«èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿½åŠ ãƒ»401æ¤œçŸ¥ã§ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ |
| â‘¡ dioInterceptor | é€šä¿¡å…¨ä½“ã®ãƒ­ã‚°ãƒ»ä¾‹å¤–å‡¦ç†ã‚’æ‹…å½“ï¼ˆæœ€çµ‚å±¤ã§å‡¦ç†ï¼‰ |

> é †ç•ªã‚’é€†ã«ã™ã‚‹ã¨ã€ãƒ­ã‚°ã«ãƒˆãƒ¼ã‚¯ãƒ³ãŒå«ã¾ã‚Œãªã‹ã£ãŸã‚Šã€401ã‚¨ãƒ©ãƒ¼æ™‚ã®è‡ªå‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãŒå‹•ä½œã—ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

---

### âœ… å‹•ä½œç¢ºèªæ‰‹é †

1. `/auth/login` ã«æœ‰åŠ¹ãªãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’POSTã—ã¦ãƒ­ã‚°ã‚¤ãƒ³  
2. `SharedPreferences` ã«ãƒˆãƒ¼ã‚¯ãƒ³ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª  
3. ä»–ã®APIé€šä¿¡ã§ `Authorization` ãƒ˜ãƒƒãƒ€ãƒ¼ãŒè‡ªå‹•ä»˜ä¸ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª  
4. ãƒˆãƒ¼ã‚¯ãƒ³å¤±åŠ¹æ™‚ã« `/auth/refresh` ãŒè‡ªå‹•å‘¼ã³å‡ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª  

---

ã“ã®æ§‹æˆã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªå…¨ä½“ã§å®‰å…¨ã‹ã¤è‡ªå‹•åŒ–ã•ã‚ŒãŸèªè¨¼ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚

---

### ğŸ’¡ è£œè¶³

- `authRepositoryProvider` ã‚’é€šã˜ã¦ãƒ­ã‚°ã‚¤ãƒ³APIã‚’å‘¼ã³å‡ºã—ã€ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜ã—ã¾ã™ã€‚  
- ä»¥é™ã®APIé€šä¿¡ã§ã¯ `tokenInterceptorProvider` ã«ã‚ˆã‚Šè‡ªå‹•ã§èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚  
- ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã‚‹ã¨è‡ªå‹•çš„ã«ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥å‡¦ç†ãŒèµ°ã‚Šã¾ã™ã€‚

---

## ğŸ”‘ èªè¨¼çŠ¶æ…‹ç®¡ç†ã¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°åˆ¶å¾¡ï¼ˆAuthGuard + SplashScreenï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€`AuthStateNotifier` ã¨ `GoRouter` ã® `redirect` æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ã€  
ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã«å¿œã˜ã¦ç”»é¢é·ç§»ã‚’è‡ªå‹•åˆ¶å¾¡ã—ã¦ã„ã¾ã™ã€‚  
ã•ã‚‰ã«ã€çŠ¶æ…‹åˆ¤å®šä¸­ã®ãƒãƒ©ã¤ãã‚’é˜²ããŸã‚ã« `SplashScreen` ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚

---

### ğŸ“ è¿½åŠ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```plaintext
lib/src/core/auth/
 â”œâ”€â”€ auth_state_notifier.dart   # ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç›£è¦–ã™ã‚‹Provider
 â”œâ”€â”€ auth_guard.dart            # GoRouterç”¨ã‚¬ãƒ¼ãƒ‰é–¢æ•°
 â””â”€â”€ token_storage.dart         # ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜ã‚¯ãƒ©ã‚¹ï¼ˆæ—¢å­˜ï¼‰

lib/src/features/splash/
 â””â”€â”€ presentation/
     â””â”€â”€ splash_screen.dart     # èµ·å‹•æ™‚ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢
```

---

ğŸ’¡  
`SplashScreen` ã¯ã‚¢ãƒ—ãƒªèµ·å‹•ç›´å¾Œã«ä¸€ç¬ã ã‘è¡¨ç¤ºã•ã‚Œã€  
èªè¨¼çŠ¶æ…‹ã®åˆ¤å®šãŒçµ‚ã‚ã‚‹ã¾ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ãƒãƒ©ã¤ãã‚’é˜²ãã¾ã™ã€‚

---

### ğŸ§ª å‹•ä½œãƒ•ãƒ­ãƒ¼

```plaintext
ã‚¢ãƒ—ãƒªèµ·å‹•
   â†“
SplashScreenè¡¨ç¤ºï¼ˆèªè¨¼çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ï¼‰
   â†“
ãƒˆãƒ¼ã‚¯ãƒ³ä¿æŒã‚ã‚Š â†’ HomeRoute("/")ã¸
ãƒˆãƒ¼ã‚¯ãƒ³ãªã— â†’ LoginRoute("/login")ã¸
```

---

### âœ… ãƒ¡ãƒªãƒƒãƒˆ

| é …ç›® | å†…å®¹ |
|------|------|
| çŠ¶æ…‹ç®¡ç† | Riverpodã§ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’æ˜ç¤ºçš„ã«ç®¡ç† |
| è‡ªå‹•é·ç§» | GoRouterã®`redirect`ã§çŠ¶æ…‹ã«å¿œã˜ã¦ãƒ«ãƒ¼ãƒˆåˆ‡æ›¿ |
| UX | SplashScreenã§ãƒãƒ©ã¤ãã®ãªã„è‡ªç„¶ãªé·ç§» |
| å†åˆ©ç”¨æ€§ | ã©ã®ã‚¢ãƒ—ãƒªã§ã‚‚æµç”¨å¯èƒ½ãªæ±ç”¨çš„æ§‹æˆ |

---

ã“ã®æ§‹æˆã«ã‚ˆã‚Šã€ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’å¸¸ã«ç›£è¦–ã—ã€  
èµ·å‹•æ™‚ãƒ»ãƒ­ã‚°ã‚¤ãƒ³æ™‚ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã®ç”»é¢é·ç§»ã‚’è‡ªå‹•åŒ–ã§ãã¾ã™ã€‚

---

## ğŸ’¾ APIã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾å¿œï¼ˆSharedPreferencesãƒ™ãƒ¼ã‚¹ï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ä¸€å®šæ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦å†åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€é€šä¿¡åŠ¹ç‡ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å‘ä¸Šã•ã›ã¦ã„ã¾ã™ã€‚
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯ `SharedPreferences` ã‚’ç”¨ã„ã¦å®Ÿç¾ã—ã¦ãŠã‚Šã€å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã›ãšã«è»½é‡ã«å‹•ä½œã—ã¾ã™ã€‚

---

### ğŸ“ è¿½åŠ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```plaintext
lib/src/core/storage/
 â”œâ”€â”€ cache_manager.dart        # ã‚­ãƒ£ãƒƒã‚·ãƒ¥å…±é€šã‚¯ãƒ©ã‚¹
 â””â”€â”€ cache_provider.dart       # Riverpodãƒ—ãƒ­ãƒã‚¤ãƒ€

lib/src/features/user/data/
 â””â”€â”€ user_repository.dart      # fetchUsersã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾å¿œåŒ–
```

---

### âœ… ãƒ¡ãƒªãƒƒãƒˆ

| é …ç›® | å†…å®¹ |
|------|------|
| é«˜é€ŸåŒ– | 2å›ç›®ä»¥é™ã¯APIé€šä¿¡ãªã—ã§å³è¡¨ç¤º |
| ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ | ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ‡æ–­æ™‚ã§ã‚‚å‰å›ãƒ‡ãƒ¼ã‚¿ã‚’åˆ©ç”¨å¯èƒ½ |
| ã‚·ãƒ³ãƒ—ãƒ« | ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¿½åŠ ä¸è¦ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒé«˜ã„ |

---

### ğŸ”„ Pull to Refreshã«ã‚ˆã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°ä¾‹

ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€`RefreshIndicator` ã‚’åˆ©ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¹ãƒ¯ã‚¤ãƒ—æ“ä½œã§æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚

```dart
// lib/src/features/user/presentation/user_list_screen.dart

import 'package:flutter/material.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:flutter_sample/src/features/user/application/user_notifier.dart';

class UserListScreen extends ConsumerWidget {
  const UserListScreen({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final users = ref.watch(userNotifierProvider);

    Future<void> onRefresh() async {
      // APIã‹ã‚‰å†å–å¾—ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°
      await ref.read(userNotifierProvider.notifier).fetchUsers(forceRefresh: true);
    }

    return Scaffold(
      appBar: AppBar(title: const Text('ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§')),
      body: users.when(
        data: (list) => RefreshIndicator(
          onRefresh: onRefresh,
          child: ListView.builder(
            itemCount: list.length,
            itemBuilder: (context, i) => ListTile(title: Text(list[i].name)),
          ),
        ),
        loading: () => const Center(child: CircularProgressIndicator()),
        error: (e, _) => Center(child: Text('ã‚¨ãƒ©ãƒ¼: $e')),
      ),
    );
  }
}
```

### ğŸ’¡ è£œè¶³

- `fetchUsers(forceRefresh: true)` ã«ã‚ˆã£ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦APIã‚’å†å–å¾—ã—ã¾ã™ã€‚  
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥å±¤ (`CacheManager`) ã« `clear()` ã‚’è¿½åŠ ã—ã¦ã‹ã‚‰å†ä¿å­˜ã™ã‚‹ã“ã¨ã§ã€å¸¸ã«æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’åæ˜ ã€‚  
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç’°å¢ƒã§ã¯å‰å›ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è‡ªå‹•ã§ä½¿ç”¨ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æãªã‚ãšã«å‹•ä½œã—ã¾ã™ã€‚

---

## ğŸ§° ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰

### ç’°å¢ƒã®åˆ‡ã‚Šæ›¿ãˆã€è¨­å®šå€¤å¤‰æ›´

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã«ä½¿ç”¨ã™ã‚‹ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç’°å¢ƒã”ã¨ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€å¯¾è±¡ã®ç’°å¢ƒè¨­å®šã«åˆã‚ã›ã¦ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

#### Localç’°å¢ƒ

```bash
fvm dart run build_runner build --delete-conflicting-outputs --define "envied_generator:envied=path=.env.local"
```

#### Devç’°å¢ƒ

```bash
fvm dart run build_runner build --delete-conflicting-outputs --define "envied_generator:envied=path=.env.dev"
```

#### Stagingç’°å¢ƒ

```bash
fvm dart run build_runner build --delete-conflicting-outputs --define "envied_generator:envied=path=.env.stg"
```

#### Productionç’°å¢ƒ

```bash
fvm dart run build_runner build --delete-conflicting-outputs --define "envied_generator:envied=path=.env.prod"
```

---

### é€šå¸¸ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ

#### éƒ½åº¦å®Ÿè¡Œã™ã‚‹å ´åˆ

```bash
fvm dart run build_runner build --delete-conflicting-outputs
```

#### ç›£è¦–ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã™ã‚‹å ´åˆ

```bash
fvm dart run build_runner watch --delete-conflicting-outputs
```

---

### ãƒã‚¤ãƒ†ã‚£ãƒ–éƒ¨åˆ†ã®ç’°å¢ƒã«ã‚ˆã‚‹åˆ‡ã‚Šæ›¿ãˆ

## iOS

`ios/scripts/extract_dart_defines.sh` ã‚’PreActionsã¨ã—ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å€¤ã‚’å–å¾—ã—ã¾ã™ã€‚  
å–å¾—ã—ãŸå€¤ã¯ `ios/Runner/Info.plist` ã‚„ `ios/Runner.xcodeproj/project.pbxproj` å†…ã§ `$(APP_NAME)` ã®ã‚ˆã†ã«å‚ç…§ã§ãã¾ã™ã€‚

### Android

`android/app/build.gradle.kts` å†…ã§ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å€¤ã‚’å–å¾—ã—ã€`dartDefines["APP_NAME"]` ã®ã‚ˆã†ã«å‚ç…§ã§ãã¾ã™ã€‚  
`resValue("string", "app_name", dartDefines["APP_NAME"] ?: "Flutter Sample")` ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€`android/app/src/main/AndroidManifest.xml` å†…ã§ `@string/app_name` ã®ã‚ˆã†ã«å‚ç…§ã§ãã¾ã™ã€‚

---

### ğŸ’¡ è£œè¶³ï¼šå†ç”ŸæˆãŒå¿…è¦ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°

| çŠ¶æ³ | ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®è¦å¦ |
|------|----------------|
| ç’°å¢ƒï¼ˆ.envï¼‰ã‚’åˆ‡ã‚Šæ›¿ãˆãŸ | ğŸ” Enviedå†ç”ŸæˆãŒå¿…è¦ |
| ãƒ¢ãƒ‡ãƒ«ï¼ˆFreezed / JsonSerializableï¼‰ã‚’æ›´æ–°ã—ãŸ | âœ… é€šå¸¸ç”Ÿæˆã®ã¿ã§OK |
| `.env` ã®å€¤ã‚’ä¿®æ­£ã—ãŸ | ğŸ” Enviedå†ç”ŸæˆãŒå¿…è¦ |
| ã‚³ãƒ¼ãƒ‰ã®ã¿å¤‰æ›´ã—ãŸ | ğŸš« Enviedä¸è¦ |

**ãƒã‚¤ãƒ³ãƒˆ:**

- Enviedã¯ç’°å¢ƒå¤‰æ•°ã‚’ãƒ“ãƒ«ãƒ‰æ™‚ã«æš—å·åŒ–ã—ã¦ç”Ÿæˆã™ã‚‹ãŸã‚ã€ç’°å¢ƒã‚’åˆ‡ã‚Šæ›¿ãˆãŸå ´åˆã‚„`.env`ã®å€¤ã‚’å¤‰æ›´ã—ãŸå ´åˆã«ã®ã¿å†ç”ŸæˆãŒå¿…è¦ã§ã™ã€‚
- Freezedã‚„Jsonãªã©ã€é€šå¸¸ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã«é–¢ã—ã¦ã¯é€šå¸¸ã®`build_runner`å®Ÿè¡Œã§ååˆ†ã§ã™ã€‚

---

## ğŸ§­ ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å­¦ã¹ã‚‹ã“ã¨

ã“ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€šã—ã¦ã€ä»¥ä¸‹ã®æŠ€è¡“ã‚„è¨­è¨ˆæ‰‹æ³•ã‚’ä½“ç³»çš„ã«å­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚

| åˆ†é‡ | å­¦ã¹ã‚‹å†…å®¹ |
|------|-------------|
| ğŸ§  çŠ¶æ…‹ç®¡ç† | Riverpodï¼ˆã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ï¼‰ã«ã‚ˆã‚‹ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªæ§‹æˆ |
| ğŸ§­ ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | GoRouter + go_router_builder ã«ã‚ˆã‚‹å‹å®‰å…¨ãªãƒ«ãƒ¼ãƒˆè¨­è¨ˆ |
| ğŸŒ é€šä¿¡ | Dio + Interceptorã«ã‚ˆã‚‹å…±é€šé€šä¿¡å±¤ã®è¨­è¨ˆ |
| ğŸ”’ èªè¨¼ | Bearerãƒˆãƒ¼ã‚¯ãƒ³ + è‡ªå‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥æ§‹æˆ |
| ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ä¿æŒ | SharedPreferencesã‚’ç”¨ã„ãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ãƒ†ãƒ¼ãƒãƒ»ãƒˆãƒ¼ã‚¯ãƒ³æ°¸ç¶šåŒ– |
| ğŸ§° ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ | build_runner + Enviedã«ã‚ˆã‚‹ç’°å¢ƒåˆ‡æ›¿å¯¾å¿œ |
| ğŸ¨ UI | FlexColorSchemeã«ã‚ˆã‚‹ãƒ†ãƒ¼ãƒè¨­å®šã¨æ°¸ç¶šåŒ– |
| ğŸ§© Lint | very_good_analysis + custom_lint + riverpod_lintã®å®Ÿç”¨è¨­å®š |
| ğŸš€ é–‹ç™ºåŠ¹ç‡ | FVM + VSCodeè¨­å®š + Git Hooks ã§çµ±ä¸€é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ |

---

## ğŸ”® ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

| ã‚«ãƒ†ã‚´ãƒª | æ‹¡å¼µå†…å®¹ |
|-----------|-----------|
| ğŸ’¡ èªè¨¼ | `flutter_secure_storage` ã‚’ä½¿ã£ãŸå®‰å…¨ãªãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜ã€OAuthå¯¾å¿œ |
| ğŸ§± ãƒ‡ãƒ¼ã‚¿ | Hiveã‚„Isarã‚’ä½¿ã£ãŸæ§‹é€ åŒ–ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€DBåŒæœŸå‡¦ç† |
| ğŸ“± UI | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒªãƒˆãƒ©ã‚¤UIã€ã‚¹ãƒŠãƒƒã‚¯ãƒãƒ¼é€šçŸ¥ã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ |
| ğŸ§© ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ | Featureå˜ä½ã§ã®ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ†å‰²ãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒªãƒ†ã‚£å¯¾å¿œ |
| ğŸ§  ãƒ†ã‚¹ãƒˆ | Unit / Widget / Integration ãƒ†ã‚¹ãƒˆå°å…¥ |
| â˜ï¸ API | GraphQLãƒ»gRPCãªã©åˆ¥é€šä¿¡æ–¹å¼ã¸ã®æ‹¡å¼µ |
| ğŸ§° CI/CD | GitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ |

---

ğŸ“˜ **ã“ã®READMEã¯å­¦ç¿’ãƒ»å®Ÿå‹™ä¸¡å¯¾å¿œã®Flutterã‚¢ãƒ—ãƒªæ§‹æˆã‚¬ã‚¤ãƒ‰ã¨ã—ã¦æ´»ç”¨ã§ãã¾ã™ã€‚**  
ãƒãƒ¼ãƒ é–‹ç™ºãƒ»æ•™è‚²ãƒ»å€‹äººå­¦ç¿’ãªã©ã€ç›®çš„ã«å¿œã˜ã¦è‡ªç”±ã«æ‹¡å¼µã—ã¦ãã ã•ã„ã€‚
